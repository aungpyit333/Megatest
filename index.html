<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>MangaZone</title>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&display=swap');
    
    :root {
      --primary: #ff4c60;
      --primary-light: #ff6b7a;
      --primary-dark: #e63e50;
      --bg: #0f0f1a;
      --card: #1e1e2f;
      --text: #fff;
      --text-secondary: #b4b4b4;
      --accent: #6c63ff;
      --gradient: linear-gradient(135deg, #ff4c60, #6c63ff);
    }
    
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }
    
    body {
      font-family: 'Poppins', sans-serif;
      background-color: var(--bg);
      color: var(--text);
      line-height: 1.6;
    }
    
    .container {
      max-width: 1280px;
      margin: 0 auto;
      padding: 0 1rem;
    }
    
    /* NAVIGATION */
    nav {
      background-color: rgba(14, 14, 26, 0.95);
      backdrop-filter: blur(10px);
      display: flex;
      align-items: center;
      justify-content: space-between;
      padding: 1rem 2rem;
      position: sticky;
      top: 0;
      z-index: 100;
      box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
    }
    
    .logo {
      font-size: 1.8rem;
      font-weight: 700;
      background: var(--gradient);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      text-shadow: 0 0 10px rgba(255, 76, 96, 0.3);
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }
    
    .logo i {
      color: var(--primary);
    }
    
    .nav-links {
      display: flex;
      gap: 1.5rem;
      align-items: center;
      padding: 10px;
    }
    
    .nav-links a {
      color: var(--text);
      text-decoration: none;
      font-weight: 500;
      transition: all 0.3s ease;
      position: relative;
      padding: 5px 0;
    }
    
    .nav-links a:after {
      content: '';
      position: absolute;
      width: 0;
      height: 2px;
      background: var(--primary);
      left: 0;
      bottom: 0;
      transition: width 0.3s ease;
    }
    
    .nav-links a:hover {
      color: var(--primary);
    }
    
    .nav-links a:hover:after {
      width: 100%;
    }
    
    .menu-toggle {
      display: none;
      font-size: 1.5rem;
      cursor: pointer;
      color: white;
    }
    
    #vipProfile {
      display: none;
      width: 40px;
      height: 40px;
      border-radius: 50%;
      overflow: hidden;
      border: 2px solid var(--primary);
      transition: all 0.3s ease;
      box-shadow: 0 0 10px rgba(255, 76, 96, 0.5);
    }
    
    #vipProfile:hover {
      transform: scale(1.1);
      border-color: var(--accent);
    }
    
    #vipImg {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }
    
    .search-icon {
      color: var(--text);
      font-size: 1.2rem;
      cursor: pointer;
      transition: color 0.3s ease;
    }
    
    .search-icon:hover {
      color: var(--primary);
    }
    
    @media (max-width: 768px) {
      .nav-links {
        display: none;
        flex-direction: column;
        width: 100%;
        background-color: rgba(14, 14, 26, 0.98);
        position: absolute;
        top: 70px;
        left: 0;
        padding: 1rem;
        border-radius: 0 0 10px 10px;
        box-shadow: 0 4px 15px rgba(0, 0, 0, 0.2);
        z-index: 100;
      }
      
      .nav-links.active {
        display: flex;
        animation: slideDown 0.3s forwards;
      }
      
      @keyframes slideDown {
        from {
          opacity: 0;
          transform: translateY(-20px);
        }
        to {
          opacity: 1;
          transform: translateY(0);
        }
      }
      
      .menu-toggle {
        display: block;
      }
    }
    
    /* HERO SECTION */
    .hero {
      background: radial-gradient(circle at 50% 50%, var(--card), var(--bg));
      padding: 3rem 1rem;
      margin-bottom: 2rem;
      text-align: center;
      animation: gradientPulse 10s infinite alternate;
    }
    
    @keyframes gradientPulse {
      0% {
        background-position: 0% 50%;
      }
      100% {
        background-position: 100% 50%;
      }
    }
    
    .hero h1 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
      background: var(--gradient);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
      display: inline-block;
    }
    
    .hero p {
      max-width: 800px;
      margin: 0 auto 1.5rem;
      color: var(--text-secondary);
    }
    
    .btn {
      display: inline-block;
      background: var(--gradient);
      color: white;
      padding: 0.8rem 1.5rem;
      border-radius: 50px;
      font-weight: 600;
      text-decoration: none;
      transition: all 0.3s ease;
      border: none;
      cursor: pointer;
      box-shadow: 0 4px 15px rgba(255, 76, 96, 0.3);
    }
    
    .btn:hover {
      transform: translateY(-3px);
      box-shadow: 0 6px 20px rgba(255, 76, 96, 0.4);
    }
    
    /* SECTION HEADERS */
    .section-header {
      position: relative;
      text-align: center;
      margin: 3rem 0 2rem;
      padding-bottom: 0.5rem;
      font-weight: 700;
      font-size: 1.8rem;
    }
    
    .section-header:after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 50%;
      transform: translateX(-50%);
      width: 60px;
      height: 3px;
      background: var(--gradient);
      border-radius: 5px;
    }
    
    /* SLIDER */
    .slider-wrapper {
      position: relative;
      margin: 0 auto;
      max-width: 1280px;
    }
    
    .slider-control {
      position: absolute;
      top: 50%;
      transform: translateY(-50%);
      width: 40px;
      height: 40px;
      background: rgba(30, 30, 47, 0.8);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      color: white;
      font-size: 1.2rem;
      z-index: 10;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.2);
      transition: all 0.3s ease;
    }
    
    .slider-control:hover {
      background: var(--primary);
      transform: translateY(-50%) scale(1.1);
    }
    
    .slider-prev {
      left: 10px;
    }
    
    .slider-next {
      right: 10px;
    }
    
    .slider-container {
      overflow-x: auto;
      scroll-snap-type: x mandatory;
      display: flex;
      padding: 1.5rem 0.5rem;
      gap: 1.2rem;
      scroll-behavior: smooth;
      position: relative;
    }
    
    .slider-container::-webkit-scrollbar {
      display: none;
    }
    
    .slider {
      display: flex;
      gap: 1.2rem;
      padding: 0.5rem;
      transition: transform 0.5s ease;
    }
    
    .slider-card {
      scroll-snap-align: start;
      flex-shrink: 0;
      width: 220px;
      background: var(--card);
      border-radius: 12px;
      overflow: hidden;
      position: relative;
      transition: all 0.3s ease;
      cursor: pointer;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
    }
    
    .slider-card:hover {
      transform: translateY(-10px);
      box-shadow: 0 15px 30px rgba(255, 76, 96, 0.2);
    }
    
    .slider-card img {
      width: 100%;
      height: 280px;
      object-fit: cover;
      transition: transform 0.5s ease;
    }
    
    .slider-card:hover img {
      transform: scale(1.05);
    }
    
    .slider-card .card-overlay {
      position: absolute;
      bottom: 0;
      left: 0;
      right: 0;
      background: linear-gradient(to top, rgba(14, 14, 26, 0.9), transparent);
      padding: 1rem;
      transform: translateY(70%);
      transition: transform 0.3s ease;
    }
    
    .slider-card:hover .card-overlay {
      transform: translateY(0);
    }
    
    .slider-card h4 {
      text-align: center;
      margin: 0;
      font-size: 1rem;
      font-weight: 600;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .slider-card .card-info {
      margin-top: 0.5rem;
      font-size: 0.8rem;
      color: var(--text-secondary);
      display: flex;
      justify-content: space-between;
    }
    
    .featured-badge {
      position: absolute;
      top: 10px;
      right: 10px;
      background: var(--primary);
      color: white;
      padding: 3px 10px;
      border-radius: 50px;
      font-size: 0.7rem;
      font-weight: 600;
      z-index: 5;
      box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    }
    
    .genre-badge {
      position: absolute;
      top: 10px;
      left: 10px;
      background: rgba(14, 14, 26, 0.8);
      color: var(--primary);
      padding: 3px 10px;
      border-radius: 50px;
      font-size: 0.7rem;
      font-weight: 600;
      z-index: 5;
    }
    
      .whattype-badge {
      position: absolute;
      top: 40px;
      left: 10px;
      background: rgba(14, 14, 26, 0.8);
      color: var(--primary);
      padding: 3px 10px;
      border-radius: 50px;
      font-size: 0.7rem;
      font-weight: 600;
      z-index: 5;
    }
    
    /* GRID */
 .grid {
  display: grid;
  gap: 1.5rem;
  padding: 0.5rem;
  grid-template-columns: repeat(2, 1fr); /* Mobile view: 2 columns */
}

@media (min-width: 768px) {
  .grid {
    grid-template-columns: repeat(4, 1fr); /* Desktop view: fixed 4 columns */
  }
}
    
    .card {
      background-color: var(--card);
      border-radius: 12px;
      overflow: hidden;
      transition: all 0.3s ease;
      cursor: pointer;
      position: relative;
      box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
      height: 100%;
      display: flex;
      flex-direction: column;
    }
    
    .card2{
      
    }
    
    .card:hover {
      transform: translateY(-10px);
      box-shadow: 0 15px 30px rgba(255, 76, 96, 0.2);
    }
    
    .card img {
      width: 100%;
      height: 250px;
      object-fit: cover;
      transition: transform 0.5s ease;
    }
    
    .card:hover img {
      transform: scale(1.05);
    }
    
    .card-content {
      padding: 1rem;
      flex-grow: 1;
      display: flex;
      flex-direction: column;
    }
    
    .card h5 {
      margin: 0 0 0.5rem;
      font-size: 1rem;
      font-weight: 400;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }
    
    .card .info {
      display: flex;
      justify-content: space-between;
      font-size: 0.8rem;
      color: var(--text-secondary);
      margin-top: auto;
    }
    
    .card .rating {
      color: gold;
      margin-top: 0.5rem;
      font-size: 0.8rem;
    }
    
    /* FILTER BAR */
    .filter-bar {
      display: flex;
      overflow-x: auto;
      gap: 0.5rem;
      padding: 1rem;
      margin-bottom: 1rem;
      background: var(--card);
      border-radius: 10px;
      box-shadow: 0 4px 10px rgba(0, 0, 0, 0.1);
    }
    
    .filter-bar::-webkit-scrollbar {
      height: 5px;
    }
    
    .filter-bar::-webkit-scrollbar-thumb {
      background: var(--primary);
      border-radius: 5px;
    }
    
    .filter-btn {
      background: var(--bg);
      color: var(--text);
      border: none;
      padding: 0.5rem 1rem;
      border-radius: 50px;
      font-size: 0.9rem;
      cursor: pointer;
      transition: all 0.3s ease;
      white-space: nowrap;
    }
    
    .filter-btn:hover, .filter-btn.active {
      background: var(--primary);
      color: white;
    }
    
    /* FOOTER */
    footer {
      background: linear-gradient(to top, var(--bg), var(--card));
      padding: 4rem 2rem 2rem;
      color: var(--text-secondary);
      margin-top: 4rem;
    }
    
    .footer-container {
      display: flex;
      flex-wrap: wrap;
      justify-content: space-between;
      gap: 2rem;
      max-width: 1280px;
      margin: 0 auto;
    }
    
    .footer-section {
      flex: 1 1 250px;
    }
    
    .footer-section h3 {
      margin-bottom: 1.5rem;
      color: var(--primary);
      font-size: 1.2rem;
      position: relative;
      padding-bottom: 0.5rem;
    }
    
    .footer-section h3:after {
      content: '';
      position: absolute;
      bottom: 0;
      left: 0;
      width: 40px;
      height: 2px;
      background: var(--primary);
    }
    
    .footer-section p {
      margin-bottom: 1.5rem;
      line-height: 1.8;
    }
    
    .footer-section a {
      display: block;
      color: var(--text-secondary);
      text-decoration: none;
      margin-bottom: 0.8rem;
      font-size: 0.9rem;
      transition: all 0.3s ease;
    }
    
    .footer-section a:hover {
      color: var(--primary);
      transform: translateX(5px);
    }
    
    .social-links {
      display: flex;
      gap: 1rem;
      margin-top: 1rem;
    }
    
    .social-links a {
      display: inline-flex;
      align-items: center;
      justify-content: center;
      width: 40px;
      height: 40px;
      background: var(--card);
      border-radius: 50%;
      color: var(--text);
      font-size: 1.2rem;
      transition: all 0.3s ease;
    }
    
    .social-links a:hover {
      background: var(--primary);
      color: white;
      transform: translateY(-5px);
    }
    
    .footer-bottom {
      text-align: center;
      margin-top: 3rem;
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      padding-top: 2rem;
      font-size: 0.9rem;
      color: var(--text-secondary);
    }
    
    /* LOADING ANIMATION */
    .loader {
      display: flex;
      justify-content: center;
      margin: 2rem 0;
      width: 100%;
      box-sizing: border-box;
      padding: 0 120px;
    }
    
    .loader .dot {
      width: 10px;
      height: 10px;
      border-radius: 50%;
      background: var(--primary);
      margin: 0 5px;
      animation: bounce 1.5s infinite ease-in-out;
    }
    
    .loader .dot:nth-child(2) {
      animation-delay: 0.2s;
      background: var(--accent);
    }
    
    .loader .dot:nth-child(3) {
      animation-delay: 0.4s;
    }
    
    @keyframes bounce {
      0%, 100% {
        transform: translateY(0);
      }
      50% {
        transform: translateY(-15px);
      }
    }
    
    /* SCROLL TO TOP BUTTON */
    .scroll-top {
      position: fixed;
      bottom: 20px;
      right: 20px;
      width: 45px;
      height: 45px;
      background: var(--primary);
      border-radius: 50%;
      display: flex;
      align-items: center;
      justify-content: center;
      color: white;
      font-size: 1.2rem;
      cursor: pointer;
      opacity: 0;
      visibility: hidden;
      transition: all 0.3s ease;
      z-index: 100;
      box-shadow: 0 4px 15px rgba(255, 76, 96, 0.4);
    }
    
    .scroll-top.active {
      opacity: 1;
      visibility: visible;
    }
    
    .scroll-top:hover {
      background: var(--accent);
      transform: translateY(-5px);
    }
    
    /* UTILITIES */
    .hidden {
      display: none;
    }
    
    .fade-in {
      animation: fadeIn 0.5s forwards;
    }
    
    @keyframes fadeIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }
    
    .no-results {
      text-align: center;
      padding: 3rem;
      color: var(--text-secondary);
    }
  </style>
</head>
<body>
  <nav>
    <div class="logo">
      <i class="fas fa-book-open"></i>
      MangaZone
    </div>
    <div class="menu-toggle" onclick="toggleMenu()"><i class="fas fa-bars"></i></div>
    <div class="nav-links" id="navLinks">
      <a href="#"><i class="fas fa-home"></i> Home</a>
      <a href="#"><i class="fas fa-list"></i> Genres</a>
      <a href="#"><i class="fas fa-fire"></i> Popular</a>
      <a href="#"><i class="fas fa-star"></i> New Releases</a>
      <a href="login.html"><i class="fas fa-sign-in-alt"></i> Login</a>
      <a href="search.html" class="search-icon"><i class="fas fa-search"></i></a>
      <a href="profile.html" id="vipProfile"><img id="vipImg" src="" alt="VIP"></a>
    </div>
  </nav>

  <section class="hero">
    <div class="container">
      <h1>Discover Amazing Manga</h1>
      <p>Your ultimate destination for reading manga, manhwa, comics and more. Explore thousands of titles across all genres.</p>
      <a href="#featured" class="btn">Explore Now <i class="fas fa-arrow-right"></i></a>
    </div>
  </section>

  <div class="container">
    <div class="filter-bar">
      <button class="filter-btn active">All</button>
      <button class="filter-btn">Incest</button>
      <button class="filter-btn">Uncensored</button>
      <button class="filter-btn">Milf</button>
      <button class="filter-btn">Anal</button>
      <button class="filter-btn">...Somes</button>
      <button class="filter-btn">Big Boobs</button>
      <button class="filter-btn">Comedy</button>
      <button class="filter-btn">NTR</button>
      <button class="filter-btn">Elf</button>
      <button class="filter-btn">Monster</button>
    </div>
  </div>

  <section id="featured">
    <h2 class="section-header">Featured Manga</h2>
    <div class="slider-wrapper">
      <div class="slider-control slider-prev" id="sliderPrev">
        <i class="fas fa-chevron-left"></i>
      </div>
      <div class="slider-container" id="sliderContainer">
        <div class="slider" id="featuredSlider"></div>
      </div>
      <div class="slider-control slider-next" id="sliderNext">
        <i class="fas fa-chevron-right"></i>
      </div>
    </div>
  </section>

  <section>
    <h2 class="section-header">Latest Manga</h2>
    <div class="container">
      <div class="grid" id="latestList">
        <!-- Loading Animation -->
        <div class="loader">
          <div class="dot"></div>
          <div class="dot"></div>
          <div class="dot"></div>
        </div>
      </div>
    </div>
  </section>

  <section>
    <h2 class="section-header">Comics</h2>
    <div class="container">
      <div class="grid" id="comicsList">
        <!-- Loading Animation -->
        <div class="loader">
          <div class="dot"></div>
          <div class="dot"></div>
          <div class="dot"></div>
        </div>
      </div>
    </div>
  </section>

  <section>
    <h2 class="section-header">Manhwa</h2>
    <div class="container">
      <div class="grid" id="manhwaList">
        <!-- Loading Animation -->
        <div class="loader">
          <div class="dot"></div>
          <div class="dot"></div>
          <div class="dot"></div>
        </div>
      </div>
    </div>
  </section>

  <section>
    <h2 class="section-header">Doujinshi</h2>
    <div class="container">
      <div class="grid" id="doujinshiList">
        <!-- Loading Animation -->
        <div class="loader">
          <div class="dot"></div>
          <div class="dot"></div>
          <div class="dot"></div>
        </div>
      </div>
    </div>
  </section>

  <section>
    <h2 class="section-header">Anime</h2>
    <div class="container">
      <div class="grid" id="animeList">
        <!-- Loading Animation -->
        <div class="loader">
          <div class="dot"></div>
          <div class="dot"></div>
          <div class="dot"></div>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="footer-container">
      <div class="footer-section">
        <h3>MangaZone</h3>
        <p>Your ultimate manga reading platform. Read anywhere, anytime with our extensive collection of manga, manhwa, comics, and more.</p>
        <div class="social-links">
          <a href="#"><i class="fab fa-facebook-f"></i></a>
          <a href="#"><i class="fab fa-twitter"></i></a>
          <a href="#"><i class="fab fa-instagram"></i></a>
          <a href="#"><i class="fab fa-discord"></i></a>
        </div>
      </div>
      <div class="footer-section">
        <h3>Quick Links</h3>
        <a href="#"><i class="fas fa-chevron-right"></i> Home</a>
        <a href="#"><i class="fas fa-chevron-right"></i> Popular</a>
        <a href="#"><i class="fas fa-chevron-right"></i> Genres</a>
        <a href="#"><i class="fas fa-chevron-right"></i> New Releases</a>
        <a href="#"><i class="fas fa-chevron-right"></i> Login/Register</a>
      </div>
      <div class="footer-section">
        <h3>Categories</h3>
        <a href="#"><i class="fas fa-chevron-right"></i> Manga</a>
        <a href="#"><i class="fas fa-chevron-right"></i> Manhwa</a>
        <a href="#"><i class="fas fa-chevron-right"></i> Comics</a>
        <a href="#"><i class="fas fa-chevron-right"></i> Doujinshi</a>
        <a href="#"><i class="fas fa-chevron-right"></i> Anime</a>
      </div>
      <div class="footer-section">
        <h3>Contact Us</h3>
        <a href="#"><i class="fas fa-envelope"></i> contact@mangazone.com</a>
        <a href="#"><i class="fab fa-facebook"></i> Facebook</a>
        <a href="#"><i class="fab fa-twitter"></i> Twitter</a>
        <a href="#"><i class="fab fa-discord"></i> Discord</a>
        <a href="#"><i class="fab fa-instagram"></i> Instagram</a>
      </div>
    </div>
    <div class="footer-bottom">
      &copy; 2025 MangaZone. All rights reserved. Read manga online, read comics online, read manhwa online.
    </div>
  </footer>

  <div class="scroll-top" id="scrollTop">
    <i class="fas fa-arrow-up"></i>
  </div>

  <script>
    function toggleMenu() {
      document.getElementById('navLinks').classList.toggle('active');
    }
    
    // Scroll to top functionality
    const scrollTopBtn = document.getElementById('scrollTop');
    
    window.addEventListener('scroll', () => {
      if (window.pageYOffset > 300) {
        scrollTopBtn.classList.add('active');
      } else {
        scrollTopBtn.classList.remove('active');
      }
    });
    
    scrollTopBtn.addEventListener('click', () => {
      window.scrollTo({
        top: 0,
        behavior: 'smooth'
      });
    });
    
    // Filter buttons interaction
    const filterBtns = document.querySelectorAll('.filter-btn');
    
    filterBtns.forEach(btn => {
      btn.addEventListener('click', () => {
        filterBtns.forEach(b => b.classList.remove('active'));
        btn.classList.add('active');
        // In a real application, this would filter the content
      });
    });
    
    // Slider navigation
    const sliderPrev = document.getElementById('sliderPrev');
    const sliderNext = document.getElementById('sliderNext');
    const sliderContainer = document.getElementById('sliderContainer');
    
    sliderPrev.addEventListener('click', () => {
      sliderContainer.scrollBy({
        left: -250,
        behavior: 'smooth'
      });
    });
    
    sliderNext.addEventListener('click', () => {
      sliderContainer.scrollBy({
        left: 250,
        behavior: 'smooth'
      });
    });
    
  </script>

  <script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-app.js";
    import { getDatabase, ref, get } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-database.js";
    import { getAuth, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/9.22.2/firebase-auth.js";

    const firebaseConfig = {
      apiKey: "AIzaSyBDHcxJMAoL5uNXPjEfMoamba5bZaH0FCU",
      authDomain: "megacomics-862d4.firebaseapp.com",
      databaseURL: "https://megacomics-862d4-default-rtdb.firebaseio.com",
      projectId: "megacomics-862d4",
      storageBucket: "megacomics-862d4.appspot.com",
      messagingSenderId: "448327465706",
      appId: "1:448327465706:android:abefa380bb6f63e2f23593"
    };

    const app = initializeApp(firebaseConfig);
    const db = getDatabase(app);
    const auth = getAuth(app);

    const dbRef = ref(db, "comics");
    const latestList = document.getElementById("latestList");
    const comicsList = document.getElementById("comicsList");
    const manhwaList = document.getElementById("manhwaList");
    const doujinshiList = document.getElementById("doujinshiList");
    const animeList = document.getElementById("animeList");
    const featuredSlider = document.getElementById("featuredSlider");

    let featuredData = [];
    
    // Remove loaders when data is loaded
    function removeLoaders() {
      const loaders = document.querySelectorAll('.loader');
      loaders.forEach(loader => loader.remove());
    }

    // Create a star rating element
    function createRating(rating = 0) {
  const stars = Math.round(rating); // Get actual rating from Firebase
  let html = '<div class="rating">';
  for (let i = 0; i < 5; i++) {
    html += i < stars ? '<i class="fas fa-star"></i>' : '<i class="far fa-star"></i>';
  }
  html += ` <span>${stars}.0</span></div>`;
  return html;
}

    // Add animation to elements as they appear
    function animateElements() {
      const callback = (entries, observer) => {
        entries.forEach(entry => {
          if (entry.isIntersecting) {
            entry.target.classList.add('fade-in');
            observer.unobserve(entry.target);
          }
        });
      };
      
      const observer = new IntersectionObserver(callback, {
        threshold: 0.1
      });
      
      const elements = document.querySelectorAll('.card, .slider-card, .section-header');
      elements.forEach(element => {
        observer.observe(element);
      });
    }

    get(dbRef).then(snapshot => {
  if (snapshot.exists()) {
    removeLoaders();
    
    const data = snapshot.val();
    Object.entries(data).forEach(([key, manga]) => {
      const cmType = (manga["cm type"] || "").toLowerCase();
      const author = manga["author name"] || "Unknown";
      const views = parseInt(manga.views) || 0;
      const rating = parseFloat(manga.rating) || 0;

      // Extract all non-empty type1 to type16 values
      const types = [];
      for (let i = 1; i <= 16; i++) {
        const typeValue = manga[`type${i}`];
        if (typeValue && typeValue.trim() !== "") {
          types.push(typeValue.trim());
        }
      }

      const randomGenre = types.length > 0 ? types[Math.floor(Math.random() * types.length)] : "Unknown";

      let statusText = "Unknown";
let statusColor = "gray";

if (manga.whattype === 0 || manga.whattype === "0") {
  statusText = "Complete";
  statusColor = "green";
} else if (manga.whattype === 1 || manga.whattype === "1") {
  statusText = "Ongoing";
  statusColor = "red";
}

      const card = document.createElement("div");
      card.className = "card";
      card.innerHTML = `
        <div class="genre-badge">${randomGenre}</div>
        <img src="${manga.img}" alt="${manga.title}">
        <div class="card-content">
          <h5 title="${manga.title}">${manga.title}</h5>
          ${createRating(rating)}
          <div class="whattype-badge" style="color:${statusColor};">${statusText}</div>
          <div class="info">
            <span><i class="fas fa-user"></i> ${author}</span>
            <span><i class="fas fa-eye"></i> ${views.toLocaleString()}</span>
          </div>
        </div>
      `;
          card.onclick = () => window.location.href = `details.html?id=${key}`;

          if ((manga.what || "").toLowerCase() === "new") latestList.appendChild(card);
          if (cmType === "comics") comicsList.appendChild(card);
          else if (cmType === "manhwa") manhwaList.appendChild(card);
          else if (cmType === "doujinshi") doujinshiList.appendChild(card);
          else if (cmType === "anime") animeList.appendChild(card);

          if (parseInt(manga.feature) === 1) {
            featuredData.push({ 
              key, 
              img: manga.img, 
              title: manga.title || "Untitled", 
              author, 
              views, 
              type: cmType, 
              genre: randomGenre 
            });
          }
        });
        
        renderSlider();
        animateElements();
        
        // Check if sections are empty and add a message
        const sections = [latestList, comicsList, manhwaList, doujinshiList, animeList];
        sections.forEach(section => {
          if (section.children.length === 0) {
            section.innerHTML = `
              <div class="no-results">
                <i class="fas fa-search" style="font-size: 3rem; margin-bottom: 1rem; color: var(--primary);"></i>
                <h3>No content found</h3>
                <p>We'll add more content soon!</p>
              </div>
            `;
          }
        });
      } else {
        console.log("No data available");
        removeLoaders();
        
        // Show no data message if database is empty
        [latestList, comicsList, manhwaList, doujinshiList, animeList].forEach(list => {
          list.innerHTML = `
            <div class="no-results">
              <i class="fas fa-exclamation-circle" style="font-size: 3rem; margin-bottom: 1rem; color: var(--primary);"></i>
              <h3>No data available</h3>
              <p>Please check back later!</p>
            </div>
          `;
        });
      }
    }).catch((error) => {
      console.error(error);
      removeLoaders();
      
      // Show error message
      [latestList, comicsList, manhwaList, doujinshiList, animeList].forEach(list => {
        list.innerHTML = `
          <div class="no-results">
            <i class="fas fa-exclamation-triangle" style="font-size: 3rem; margin-bottom: 1rem; color: var(--primary);"></i>
            <h3>Error loading data</h3>
            <p>Please check your connection and try again</p>
          </div>
        `;
      });
    });

    function renderSlider() {
      featuredSlider.innerHTML = "";
      
      if (featuredData.length === 0) {
        document.querySelector('#featured').innerHTML = `
          <h2 class="section-header">Featured Manga</h2>
          <div class="container">
            <div class="no-results">
              <i class="fas fa-star" style="font-size: 3rem; margin-bottom: 1rem; color: var(--primary);"></i>
              <h3>No featured content</h3>
              <p>Featured manga will appear here</p>
            </div>
          </div>
        `;
        return;
      }
      
      featuredData.forEach(manga => {
        const card = document.createElement("div");
        card.className = "slider-card";
        card.innerHTML = `
          <div class="featured-badge">Featured</div>
          <div class="genre-badge">${manga.genre}</div>
          <img src="${manga.img}" alt="${manga.title}">
          <div class="card-overlay">
            <h4 title="${manga.title}">${manga.title}</h4>
            <div class="card-info">
              <span><i class="fas fa-user"></i> ${manga.author}</span>
              <span><i class="fas fa-eye"></i> ${manga.views.toLocaleString()}</span>
            </div>
          </div>
        `;
        card.onclick = () => window.location.href = `details.html?id=${manga.key}`;
        featuredSlider.appendChild(card);
      });
    }

    function autoSlide() {
      const container = document.getElementById("sliderContainer");
      const cardWidth = 220 + 16; // card width + gap
      
      if (!container) return;
      
      container.scrollLeft += cardWidth;
      if (container.scrollLeft + container.clientWidth >= container.scrollWidth - 100) {
        // Smoothly scroll back to beginning when reaching end
        setTimeout(() => {
          container.scrollTo({
            left: 0,
            behavior: 'smooth'
          });
        }, 1000);
      }
    }
    
    // Start autoslide after everything is loaded
    setTimeout(() => {
      const autoSlideInterval = setInterval(autoSlide, 5000);
      
      // Stop autoslide when user interacts with slider
      const sliderControls = document.querySelectorAll('.slider-control');
      sliderControls.forEach(control => {
        control.addEventListener('click', () => {
          clearInterval(autoSlideInterval);
          // Restart after user interaction stops
          setTimeout(() => {
            setInterval(autoSlide, 5000);
          }, 10000);
        });
      });
    }, 2000);

    onAuthStateChanged(auth, (user) => {
      const loginLink = document.querySelector(".nav-links a[href='login.html']");
      if (user) {
        // User is signed in
        if (loginLink) {
          loginLink.innerHTML = '<i class="fas fa-sign-out-alt"></i> Logout';
          loginLink.href = "#"; // Would handle logout in a real app
          loginLink.addEventListener('click', (e) => {
            e.preventDefault();
            // In a real app, would sign out the user
            alert('Logout functionality would be implemented here');
          });
        }
        
        const uid = user.uid;
        const vipRef = ref(db, `vip/${uid}`);
        
        get(vipRef).then(snapshot => {
          if (snapshot.exists()) {
            const data = snapshot.val();
            const vipImg = document.getElementById("vipImg");
            const vipProfile = document.getElementById("vipProfile");
            
            if (data.img) {
              vipImg.src = data.img;
              vipProfile.style.display = "inline-block";
              
              // Add welcome message for logged in users
              const hero = document.querySelector('.hero');
              if (hero) {
                const welcomeMsg = document.createElement('div');
                welcomeMsg.className = 'fade-in';
                welcomeMsg.style.marginTop = '1rem';
                welcomeMsg.innerHTML = `
                  <p style="color: var(--primary); font-weight: 600;">
                    <i class="fas fa-crown"></i> Welcome back, VIP Member!
                  </p>
                `;
                hero.querySelector('.container').appendChild(welcomeMsg);
              }
            }
          }
        }).catch(error => {
          console.error("Error getting VIP data:", error);
        });
      } else {
        // User is signed out
        if (loginLink) {
          loginLink.innerHTML = '<i class="fas fa-sign-in-alt"></i> Login';
          loginLink.href = "login.html";
        }
        
        const vipProfile = document.getElementById("vipProfile");
        if (vipProfile) {
          vipProfile.style.display = "none";
        }
      }
    });
  </script>